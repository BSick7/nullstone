var nullstone;!function(a){a.version="0.1.0"}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function b(){}return b.prototype.loadAsync=function(b,c){var d=b+"/"+c;return a.async.create(function(a,b){require([d],function(b){a(b)},b)})},b.prototype.resolveType=function(a,b,c){return c.isPrimitive=!1,c.type=require(a+"/"+b),void 0!==c.type},b}();a.DirResolver=b}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function a(a){this.Object=a}return a}();a.Enum=b}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function a(){this.$$callbacks=[],this.$$scopes=[]}return Object.defineProperty(a.prototype,"has",{get:function(){return this.$$callbacks.length>0},enumerable:!0,configurable:!0}),a.prototype.on=function(a,b){this.$$callbacks.push(a),this.$$scopes.push(b)},a.prototype.off=function(a,b){for(var c=this.$$callbacks,d=this.$$scopes,e=c.length-1;e>0;)e=c.lastIndexOf(a,e),d[e]===b&&(c.splice(e,1),d.splice(e,1)),e--},a.prototype.raise=function(a,b){for(var c=0,d=this.$$callbacks.slice(0),e=this.$$scopes.slice(0),f=d.length;f>c;c++)d[c].call(e[c],a,b)},a.prototype.raiseAsync=function(a,b){var c=this;window.setTimeout(function(){return c.raise(a,b)},1)},a}();a.Event=b}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function b(a){Object.defineProperty(this,"name",{value:a,writable:!1})}return b.prototype.is=function(b){if(!b)return!1;for(var c=b.constructor;c;){var d=c.$$interfaces;if(d&&d.indexOf(this)>-1)return!0;c=a.getTypeParent(c)}return!1},b.prototype.as=function(a){return this.is(a)?a:void 0},b}();a.Interface=b}(nullstone||(nullstone={}));var nullstone;!function(a){a.ICollection_=new a.Interface("ICollection"),a.ICollection_.is=function(a){return a?"function"==typeof a.GetValueAt&&"function"==typeof a.SetValueAt:!1}}(nullstone||(nullstone={}));var nullstone;!function(a){a.IEnumerable_=new a.Interface("IEnumerable"),a.IEnumerable_.is=function(a){return a&&a.getEnumerator&&"function"==typeof a.getEnumerator},a.IEnumerable_.empty={getEnumerator:function(){return a.IEnumerator_.empty}},a.IEnumerable_.fromArray=function(b){return{$$arr:b,getEnumerator:function(b){return a.IEnumerator_.fromArray(this.$$arr,b)}}}}(nullstone||(nullstone={}));var nullstone;!function(a){a.IEnumerator_=new a.Interface("IEnumerator"),a.IEnumerator_.empty={current:void 0,moveNext:function(){return!1}},a.IEnumerator_.fromArray=function(a,b){var c,d=a.length,e={moveNext:void 0,current:void 0};return b?(c=d,e.moveNext=function(){return c--,0>c?(e.current=void 0,!1):(e.current=a[c],!0)}):(c=-1,e.moveNext=function(){return c++,c>=d?(e.current=void 0,!1):(e.current=a[c],!0)}),e}}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function b(){}return Object.defineProperty(b.prototype,"propertyType",{get:function(){return void 0},enumerable:!0,configurable:!0}),b.prototype.getValue=function(a,b){return this.GetFunc?this.GetFunc.call(a,b):void 0},b.prototype.setValue=function(a,b,c){this.SetFunc&&this.SetFunc.call(a,b,c)},b.find=function(c){var d=c,e=c instanceof Function;if(e&&(d=new c),d instanceof Array){var f=new b;return f.GetFunc=function(a){return this[a]},f.SetFunc=function(a,b){this[a]=b},f}var g=a.ICollection_.as(d);if(g){var f=new b;return f.GetFunc=function(a){return this.GetValueAt(a)},f.SetFunc=function(a,b){return this.SetValueAt(a,b)},f}},b}();a.IndexedPropertyInfo=b}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function b(a){this.$$module=null,this.$$sourcePath=null,this.$$primtypes={},this.$$types={},Object.defineProperty(this,"uri",{value:a,writable:!1})}return Object.defineProperty(b.prototype,"sourcePath",{get:function(){return this.$$sourcePath||"lib/"+this.uri+"/"+this.uri},set:function(a){".js"===a.substr(a.length-3)&&(a=a.substr(0,a.length-3)),this.$$sourcePath=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rootModule",{get:function(){return this.$$module=this.$$module||require(this.sourcePath)},enumerable:!0,configurable:!0}),b.prototype.loadAsync=function(){var b=this;return this.$configModule(),a.async.create(function(a,c){require([b.uri],function(c){b.$$module=c,a(b)},c)})},b.prototype.$configModule=function(){var a={paths:{},shim:{},map:{"*":{}}},b=this.sourcePath;a.paths[this.uri]=b,a.shim[this.uri]={exports:this.exports},a.map["*"][b]=this.uri,require.config(a)},b.prototype.resolveType=function(a,b,c){if(!a)return c.isPrimitive=!0,void 0!==(c.type=this.$$primtypes[b])?!0:(c.isPrimitive=!1,void 0!==(c.type=this.$$types[b]));var d=this.rootModule;if(c.isPrimitive=!1,c.type=void 0,"/"!==a)for(var e=0,f=a.substr(1).split(".");e<f.length&&d;e++)d=d[f[e]];return d?(c.type=d[b],void 0!==c.type):!1},b.prototype.add=function(a,b){if(!b)throw new Error("A type must be specified when registering '"+a+"'`.");return Object.defineProperty(b,"$$uri",{value:this.uri,writable:!1}),this.$$types[a]=b,this},b.prototype.addPrimitive=function(a,b){if(!b)throw new Error("A type must be specified when registering '"+a+"'`.");return Object.defineProperty(b,"$$uri",{value:this.uri,writable:!1}),this.$$primtypes[a]=b,this},b.prototype.addEnum=function(a,b){return this.add(a,b),Object.defineProperty(b,"$$enum",{value:!0,writable:!1}),b.name=a,this},b}();a.Library=b}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function b(){this.$$libs={},this.dirResolver=new a.DirResolver}return b.prototype.createLibrary=function(b){return new a.Library(b)},b.prototype.loadTypeAsync=function(a,b){var c=this.resolve(a);return c?c.loadAsync():this.dirResolver.loadAsync(a,b)},b.prototype.resolve=function(b){var c=new a.Uri(b),d=c.scheme;if(!d)return null;var e="lib"===d?c.host:b,f=this.$$libs[e];return f||(f=this.$$libs[e]=this.createLibrary(e)),f},b.prototype.resolveType=function(b,c,d){var e=new a.Uri(b),f=e.scheme;if(!f)return this.dirResolver.resolveType(b,c,d);var g="lib"===f?e.host:b,h="lib"===f?e.absolutePath:"",i=this.$$libs[g];return i||(i=this.$$libs[g]=this.createLibrary(g)),i.resolveType(h,c,d)},b}();a.LibraryResolver=b}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function a(a){this.$$cache=[],this.$$creator=a}return a.prototype.memoize=function(a){var b=this.$$cache[a];return b||(b=this.$$creator(a)),b},a}();a.Memoizer=b}(nullstone||(nullstone={}));var nullstone;!function(a){function b(a,b){if(!a)return void 0;var c=a.constructor,d=Object.getOwnPropertyDescriptor(c.prototype,b);return d?d:Object.getOwnPropertyDescriptor(a,b)}function c(a,b){if(!a)return!1;if(a.hasOwnProperty(b))return!0;var c=a.constructor;return c.prototype.hasOwnProperty(b)}a.getPropertyDescriptor=b,a.hasProperty=c}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function b(){}return b.prototype.getValue=function(a){return this.$$getFunc?this.$$getFunc.call(a):void 0},b.prototype.setValue=function(a,b){return this.$$setFunc?this.$$setFunc.call(a,b):void 0},b.find=function(c,d){var e=c,f=c instanceof Function;if(f&&(e=new c),!(e instanceof Object))return null;var g=d,h=a.getPropertyDescriptor(e,d);if(h){var i=new b;return i.$$getFunc=h.get,i.$$getFunc||(i.$$getFunc=function(){return this[g]}),i.$$setFunc=h.set,!i.$$setFunc&&h.writable&&(i.$$setFunc=function(a){this[g]=a}),i}var j=f?c:c.constructor,i=new b;return i.$$getFunc=j.prototype["Get"+d],i.$$setFunc=j.prototype["Set"+d],i},b}();a.PropertyInfo=b}(nullstone||(nullstone={}));var nullstone;!function(a){function b(a){var b=a;if(!b)return"";var c=b.name;if(c)return c;var c=b.toString().match(/function ([^\(]+)/)[1];return Object.defineProperty(b,"name",{enumerable:!1,value:c,writable:!1}),c}function c(a){if(a===Object)return null;var b=a.$$parent;if(!b){if(!a.prototype)return void 0;b=Object.getPrototypeOf(a.prototype).constructor,Object.defineProperty(a,"$$parent",{value:b,writable:!1})}return b}function d(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];if(b){for(var d=0,e=b.length;e>d;d++)if(!b[d]){console.warn("Registering undefined interface on type.",a);break}Object.defineProperty(a,"$$interfaces",{value:b,writable:!1})}}a.getTypeName=b,a.getTypeParent=c,a.addTypeInterfaces=d}(nullstone||(nullstone={}));var nullstone;!function(a){function b(b,c){var d=e[c];if(d)return d(b);if(c instanceof a.Enum){var f=c.Object;return f.Converter?f.Converter(b):(b=b||0,"string"==typeof b?f[b]:b)}return b}function c(a,b){e[a]=b}function d(a,b){a.Converter=b}var e=[];e[Boolean]=function(a){if(null==a)return null;if("boolean"==typeof a)return a;var b=a.toString().toUpperCase();return"TRUE"===b?!0:"FALSE"===b?!1:null},e[String]=function(a){return null==a?"":a.toString()},e[Number]=function(a){return a?"number"==typeof a?a:parseFloat(a.toString()):0},e[Date]=function(a){return new Date(null==a?0:a.toString())},e[RegExp]=function(a){if(a instanceof RegExp)return a;if(a=null)throw new Error("Cannot specify an empty RegExp.");return a=a.toString(),new RegExp(a)},a.convertAnyToType=b,a.registerTypeConverter=c,a.registerEnumConverter=d}(nullstone||(nullstone={}));var nullstone;!function(a){!function(a){a[a.RelativeOrAbsolute=0]="RelativeOrAbsolute",a[a.Absolute=1]="Absolute",a[a.Relative=2]="Relative"}(a.UriKind||(a.UriKind={}));var b=(a.UriKind,function(){function a(b,c){"string"==typeof b?(this.$$originalString=b,this.$$kind=c||0):b instanceof a&&(this.$$originalString=b.$$originalString,this.$$kind=b.$$kind)}return Object.defineProperty(a.prototype,"kind",{get:function(){return this.$$kind},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"host",{get:function(){var a=this.$$originalString,b=Math.max(3,a.indexOf("://")+3),c=a.indexOf("/",b);return 0>c?a.substr(b):a.substr(b,c-b)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"absolutePath",{get:function(){var a=this.$$originalString,b=Math.max(3,a.indexOf("://")+3),c=a.indexOf("/",b);if(0>c||b>c)return"/";var d=a.indexOf("?",c);return 0>d||c>d?a.substr(c):a.substr(c,d-c)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scheme",{get:function(){var a=this.$$originalString,b=a.indexOf("://");return 0>b?null:a.substr(0,b)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fragment",{get:function(){var a=this.$$originalString,b=a.indexOf("#");return 0>b?"":a.substr(b)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"originalString",{get:function(){return this.$$originalString.toString()},enumerable:!0,configurable:!0}),a.prototype.toString=function(){return this.$$originalString.toString()},a.prototype.equals=function(a){return this.$$originalString===a.$$originalString},a.isNullOrEmpty=function(a){return null==a?!0:!a.$$originalString},a}());a.Uri=b,a.registerTypeConverter(b,function(a){return null==a&&(a=""),new b(a.toString())})}(nullstone||(nullstone={}));var nullstone;!function(a){var b=function(){function b(b,c){this.defaultUri=b,this.xUri=c,this.libResolver=new a.LibraryResolver,this.libResolver.resolve(b).add("Array",Array),this.libResolver.resolve(c).addPrimitive("String",String).addPrimitive("Number",Number).addPrimitive("Double",Number).addPrimitive("Date",Date).addPrimitive("RegExp",RegExp).addPrimitive("Boolean",Boolean).addPrimitive("Uri",a.Uri)}return b.prototype.resolveLibrary=function(a){return this.libResolver.resolve(a)},b.prototype.loadTypeAsync=function(a,b){return this.libResolver.loadTypeAsync(a,b)},b.prototype.resolveType=function(a,b,c){return c.isPrimitive=!1,c.type=void 0,this.libResolver.resolveType(a,b,c)},b.prototype.add=function(a,b,c){var d=this.libResolver.resolve(a);return d&&d.add(b,c),this},b.prototype.addPrimitive=function(a,b,c){var d=this.libResolver.resolve(a);return d&&d.addPrimitive(b,c),this},b.prototype.addEnum=function(a,b,c){var d=this.libResolver.resolve(a);return d&&d.addEnum(b,c),this},b}();a.TypeManager=b}(nullstone||(nullstone={}));var nullstone;!function(a){function b(a,b,c,d){var e=a,f=e.$$annotations;f||Object.defineProperty(e,"$$annotations",{value:f=[],writable:!1});var g=f[b];if(g||(f[b]=g=[]),d&&g.length>0)throw new Error("Only 1 '"+b+"' annotation allowed per type ["+a.constructor.name+"].");g.push(c)}function c(a,b){var c=a,d=c.$$annotations;return d?(d[b]||[]).slice(0):void 0}function d(a){function d(c){for(var d=[],e=0;e<arguments.length-1;e++)d[e]=arguments[e+1];for(var f=0,g=d.length;g>f;f++)b(c,a,d[f])}return d.Get=function(b){return c(b,a)},d}a.Annotation=b,a.GetAnnotations=c,a.CreateTypedAnnotation=d}(nullstone||(nullstone={}));var nullstone;!function(a){!function(a){function b(a){function b(a){f=a,d&&d(a)}function c(a){g=a,e&&e(a)}var d,e,f,g;a(b,c);var h={then:function(a,b){return d=a,e=b,void 0!==f?d&&d(f):void 0!==g&&e&&e(g),h}};return h}function c(b){return a.create(function(a){a(b)})}function d(b){return a.create(function(a,c){c(b)})}function e(a){return!a||a.length<1?c([]):b(function(b,c){function d(a,d,j){e[a]=d,f[a]=j,i=i||void 0!==j,g++,g>=h&&(i?c(f):b(e))}for(var e=new Array(a.length),f=new Array(a.length),g=0,h=a.length,i=!1,j=0;h>j;j++)a[j].then(function(a){return d(j,a,void 0)},function(a){return d(j,void 0,a)})})}a.create=b,a.resolve=c,a.reject=d,a.many=e}(a.async||(a.async={}));a.async}(nullstone||(nullstone={}));var nullstone;!function(a){function b(a,b){return null==a&&null==b?!0:null==a||null==b?!1:a===b?!0:!!a.equals&&a.equals(b)}a.equals=b}(nullstone||(nullstone={}));var nullstone;!function(a){!function(a){a.NO_PARSER={onResolveType:function(){return a.NO_PARSER},parse:function(){}}}(a.markup||(a.markup={}));a.markup}(nullstone||(nullstone={}));var nullstone;!function(a){!function(b){var c=function(){function c(b){this.uri=new a.Uri(b)}return c.prototype.createParser=function(){return b.NO_PARSER},c.prototype.resolve=function(a){var c=new b.MarkupDependencyResolver(a,this.createParser());return c.collect(this.root),c.resolve()},c.prototype.loadAsync=function(){var b="text!"+this.uri.toString(),c=this;return a.async.create(function(a,d){require([b],function(b){c.setRoot(c.loadRoot(b)),a(c)},d)})},c.prototype.loadRoot=function(a){return a},c.prototype.setRoot=function(a){return this.root=a,this},c}();b.Markup=c}(a.markup||(a.markup={}));a.markup}(nullstone||(nullstone={}));var nullstone;!function(a){!function(b){var c=function(){function b(a,b){this.typeManager=a,this.parser=b,this.$$uris=[],this.$$names=[],this.$$resolving=[]}return b.prototype.collect=function(a){var b=this;this.parser.onResolveType(function(a,c){return b.add(a,c),Object}).parse(a)},b.prototype.add=function(a,b){var c=this.$$uris,d=this.$$names,e=c.indexOf(a);return e>-1&&d[e]===b?!1:this.$$resolving.indexOf(a+"/"+b)>-1?!1:(c.push(a),d.push(b),!0)},b.prototype.resolve=function(){for(var b=[],c=0,d=this.$$uris,e=this.$$names,f=this.typeManager,g=this.$$resolving;c<d.length;c++){var h=d[c],i=e[c];g.push(h+"/"+i),b.push(f.loadTypeAsync(h,i))}return a.async.many(b)},b}();b.MarkupDependencyResolver=c}(a.markup||(a.markup={}));a.markup}(nullstone||(nullstone={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},nullstone;!function(a){!function(b){!function(c){var d=new DOMParser,e=new a.Memoizer(function(a){return new f(a)}),f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.create=function(a){return e.memoize(a.toString())},b.prototype.createParser=function(){return new c.XamlParser},b.prototype.loadRoot=function(a){var b=d.parseFromString(a,"text/xml");return b.documentElement},b}(b.Markup);c.XamlMarkup=f}(b.xaml||(b.xaml={}));b.xaml}(a.markup||(a.markup={}));a.markup}(nullstone||(nullstone={}));var nullstone;!function(a){!function(a){!function(a){a.DEFAULT_XMLNS="http://schemas.wsick.com/fayde",a.DEFAULT_XMLNS_X="http://schemas.wsick.com/fayde/x";var b="http://www.w3.org/1999/xhtml",c="parsererror",d=function(){function d(){this.$$onEnd=null,this.$$objectStack=[],this.extension=this.createExtensionParser(),this.setNamespaces(a.DEFAULT_XMLNS,a.DEFAULT_XMLNS_X)}return d.prototype.setNamespaces=function(a,b){return this.$$defaultXmlns=a,this.$$xXmlns=b,this.extension.setNamespaces(a,b),this},d.prototype.createExtensionParser=function(){return new a.extensions.XamlExtensionParser},d.prototype.parse=function(a){return this.$$ensure(),this.$$handleElement(a,!0),this.$$destroy(),this},d.prototype.$$handleElement=function(a,b){var c=a.localName,d=a.namespaceURI;if(!this.$$tryHandleError(a,d,c)&&!this.$$tryHandlePropertyTag(a,d,c)){var e=this.$$onResolveType(d,c),f=this.$$onResolveObject(e);this.$$objectStack.push(f),b?this.$$onContentObject(f):this.$$onObject(f);for(var g=0,h=a.attributes,i=h.length;i>g;g++)this.$$processAttribute(h[g]);for(var j=a.firstElementChild,k=!!j;j;)this.$$handleElement(j,!0),j=j.nextElementSibling;if(!k){var l=a.textContent;l&&this.$$onContentText(l.trim())}this.$$objectStack.pop(),this.$$onObjectEnd(f)}},d.prototype.$$tryHandleError=function(a,d,e){return d!==b||e!==c?!1:(this.$$onError(new Error(a.textContent)),!0)},d.prototype.$$tryHandlePropertyTag=function(a,b,c){var d=c.indexOf(".");if(0>d)return!1;var e=this.$$onResolveType(b,c.substr(0,d));c=c.substr(d+1),this.$$onPropertyStart(e,c);for(var f=a.firstElementChild;f;)this.$$handleElement(f,!1),f=f.nextElementSibling;return this.$$onPropertyEnd(e,c),!0},d.prototype.$$processAttribute=function(a){var b=a.prefix,c=a.localName;if(this.$$shouldSkipAttr(b,c))return!0;var d=a.namespaceURI,e=a.value;return this.$$tryHandleXAttribute(d,c,e)?!0:this.$$handleAttribute(d,c,e,a)},d.prototype.$$shouldSkipAttr=function(a,b){return"xmlns"===a?!0:!a&&"xmlns"===b},d.prototype.$$tryHandleXAttribute=function(a,b,c){return a!==this.$$xXmlns?!1:("Name"===b&&this.$$onName(c),"Key"===b&&this.$$onKey(c),!0)},d.prototype.$$handleAttribute=function(a,b,c,d){var e=null,b=b,f=b.indexOf(".");f>-1&&(e=this.$$onResolveType(a,b.substr(0,f)),b=b.substr(f+1)),this.$$onPropertyStart(e,b);var g=this.$$getAttrValue(c,d);return this.$$onObject(g),this.$$onObjectEnd(g),this.$$onPropertyEnd(e,b),!0},d.prototype.$$getAttrValue=function(a,b){return"{"!==a[0]?a:this.extension.parse(a,b,this.$$objectStack)},d.prototype.$$ensure=function(){this.onResolveType(this.$$onResolveType).onResolveObject(this.$$onResolveObject).onObject(this.$$onObject).onObjectEnd(this.$$onObjectEnd).onContentObject(this.$$onContentObject).onContentText(this.$$onContentText).onName(this.$$onName).onKey(this.$$onKey).onPropertyStart(this.$$onPropertyStart).onPropertyEnd(this.$$onPropertyEnd).onError(this.$$onError),this.extension.onResolveType(this.$$onResolveType).onResolveObject(this.$$onResolveObject)},d.prototype.onResolveType=function(a){return this.$$onResolveType=a||function(){return Object},this},d.prototype.onResolveObject=function(a){return this.$$onResolveObject=a||function(a){return new a},this},d.prototype.onObject=function(a){return this.$$onObject=a||function(){},this},d.prototype.onObjectEnd=function(a){return this.$$onObjectEnd=a||function(){},this},d.prototype.onContentObject=function(a){return this.$$onContentObject=a||function(){},this},d.prototype.onContentText=function(a){return this.$$onContentText=a||function(){},this},d.prototype.onName=function(a){return this.$$onName=a||function(){},this},d.prototype.onKey=function(a){return this.$$onKey=a||function(){},this},d.prototype.onPropertyStart=function(a){return this.$$onPropertyStart=a||function(){},this},d.prototype.onPropertyEnd=function(a){return this.$$onPropertyEnd=a||function(){},this},d.prototype.onError=function(a){return this.$$onError=a||function(){return!0},this},d.prototype.onEnd=function(a){return this.$$onEnd=a,this},d.prototype.$$destroy=function(){this.$$onEnd&&this.$$onEnd()},d}();a.XamlParser=d}(a.xaml||(a.xaml={}));a.xaml}(a.markup||(a.markup={}));a.markup}(nullstone||(nullstone={}));var nullstone;!function(a){!function(a){!function(a){!function(b){var c=function(){function b(){this.$$defaultXmlns="http://schemas.wsick.com/fayde",this.$$xXmlns="http://schemas.wsick.com/fayde/x",this.$$onEnd=null}return b.prototype.setNamespaces=function(a,b){this.$$defaultXmlns=a,this.$$xXmlns=b},b.prototype.parse=function(a,b,c){this.$$ensure();var d={text:a,i:1,acc:"",error:"",resolver:b},e=this.$$doParse(d,c);return d.error&&this.$$onError(d.error),this.$$destroy(),e},b.prototype.$$doParse=function(a,b){if(!this.$$parseName(a))return void 0;if(!this.$$startExtension(a,b))return void 0;for(;a.i<a.text.length&&this.$$parseKeyValue(a,b)&&"}"!==a.text[a.i];);return b.pop()},b.prototype.$$parseName=function(a){var b=a.text.indexOf(" ",a.i);return b>a.i?(a.acc=a.text.substr(a.i,b-a.i),a.i=b+1,!0):(b=a.text.indexOf("}",a.i),b>a.i?(a.acc=a.text.substr(a.i,b-a.i),a.i=b,!0):(a.error="Missing closing bracket.",!1))},b.prototype.$$startExtension=function(b,c){var d=b.acc,e=d.indexOf(":"),f=0>e?null:d.substr(0,e),g=0>e?d:d.substr(e+1),h=f?b.resolver.lookupNamespaceURI(f):a.DEFAULT_XMLNS;if(h===this.$$xXmlns){var i=b.text.substr(b.i,b.text.length-b.i-1);return b.i=b.text.length,this.$$parseXExt(b,c,g,i)}var j=this.$$onResolveType(h,g),k=this.$$onResolveObject(j);return c.push(k),!0},b.prototype.$$parseXExt=function(a,b,c,d){if("Null"===c)return b.push(null),!0;if("Type"===c){var e=d.indexOf(":"),f=0>e?null:d.substr(0,e),c=0>e?d:d.substr(e+1),g=a.resolver.lookupNamespaceURI(f),h=this.$$onResolveType(g,c);return b.push(h),!0}if("Static"===c){var i=new Function("return ("+d+");");return b.push(i()),!0}return!0},b.prototype.$$parseKeyValue=function(a,b){var c=a.text;a.acc="";for(var d="",e=void 0;a.i<c.length;a.i++){var f=c[a.i];if("\\"===f)a.i++,a.acc+=c[a.i];else if("{"===f){if(!d)return a.error="A sub extension must be set to a key.",!1;if(a.i++,e=this.$$doParse(a,b),a.error)return!1}else if("="===f)d=a.acc,a.acc="";else{if("}"===f)return this.$$finishKeyValue(a.acc,d,e,b),!0;if(","===f)return a.i++,this.$$finishKeyValue(a.acc,d,e,b),!0;a.acc+=f}}},b.prototype.$$finishKeyValue=function(a,b,c,d){if(void 0!==c||(c=a.trim())){"function"==typeof c.transmute&&(c=c.transmute(d));var e=d[d.length-1];b?e[b]=c:e.init&&e.init(c)}},b.prototype.$$ensure=function(){this.onResolveType(this.$$onResolveType).onResolveObject(this.$$onResolveObject).onError(this.$$onError)},b.prototype.onResolveType=function(a){return this.$$onResolveType=a||function(){return Object},this},b.prototype.onResolveObject=function(a){return this.$$onResolveObject=a||function(a){return new a},this},b.prototype.onError=function(a){return this.$$onError=a||function(){},this},b.prototype.onEnd=function(a){return this.$$onEnd=a,this},b.prototype.$$destroy=function(){this.$$onEnd&&this.$$onEnd()},b}();b.XamlExtensionParser=c}(a.extensions||(a.extensions={}));a.extensions}(a.xaml||(a.xaml={}));a.xaml}(a.markup||(a.markup={}));a.markup}(nullstone||(nullstone={}));
//# sourceMappingURL=nullstone.min.map